import{e as j,r as b,f as Y,g as L,h as X,i as H,j as P,k as U,v as W,l as k,T as $}from"../app.6de02f03.js";(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".v-dropdown-trigger{display:inline-block}.v-dropdown-trigger.v-dropdown-trigger--full-width{display:block}.v-dropdown-container{-webkit-font-smoothing:subpixel-antialiased;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;backface-visibility:hidden;display:inline-block;margin:0;padding:0;position:absolute;top:0;left:0;border:1px solid #D6D7D7;box-sizing:border-box;background-color:#fff;border-radius:.3rem;overflow:hidden;z-index:3000;will-change:opacity,transform,top,left;-webkit-box-shadow:0 15px 25px rgba(0,0,0,.2);-moz-box-shadow:0 15px 25px rgba(0,0,0,.2);box-shadow:0 15px 25px #0003}.v-dropdown-container.v-dropdown-no-border{border:0;-webkit-box-shadow:0 3px 20px rgba(0,0,0,.2);-moz-box-shadow:0 3px 20px rgba(0,0,0,.2);box-shadow:0 3px 20px #0003}.animate-down-enter-from,.animate-down-leave-to{transform:perspective(1px) translateY(-6px) translateZ(0);opacity:0}.animate-up-enter-from,.animate-up-leave-to{transform:perspective(1px) translateY(6px) translateZ(0);opacity:0}.animate-down-enter-active,.animate-up-enter-active{-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.animate-down-leave-active,.animate-up-leave-active{-webkit-transition:all .2s ease-out;transition:all .2s ease-out}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();function V(){const e=window.pageXOffset!==void 0,t=(document.compatMode||"")==="CSS1Compat";return{x:e?window.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft,y:e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop}}function N(e){return window.getComputedStyle(e).display==="none"}function z(e){if(N(e)){e.style.visibility="hidden",e.style.display="inline-block";const t=e.getBoundingClientRect();return e.style.visibility="visible",e.style.display="none",t}return e.getBoundingClientRect()}const O="click",R="hover",Z="contextmenu",D=150,B=5;function q(e,t){return typeof e.animated=="string"?e.animated:e.animated?t.value?"animate-up":"animate-down":""}function T(e){return{isTriggerByClick:e.trigger===O,isTriggerByHover:e.trigger===R,isTriggerByContextmenu:e.trigger===Z}}function A(e,t,p,d){const{isTriggerByContextmenu:n}=T(e),o=window.pageYOffset,u=document.documentElement.clientHeight,c=n?t:p.top+o;let i=n?t:p.top+p.height+B+o,l=!1,a=!1,h=!1;return i+d.height>o+u&&(l=!0),c-B-d.height<o&&(a=!0),!a&&l&&(i=c-B-d.height,h=!0),{dropUp:h,top:i}}function G(e,t,p,d){const{isTriggerByContextmenu:n}=T(e),o=window.pageXOffset,u=document.documentElement.clientWidth,c=n?0:p.width,i=n?t:p.left+o,l=i+c/2-d.width/2,a=i+c-d.width;switch(e.align){case"left":return i+d.width>o+u?a:i;case"center":return l+d.width>o+u?a:a<o?i:l;case"right":return a<o?i:a}}function J(e){const t=V();return{x:e.pageX||e.clientX+t.x,y:e.pageY||e.clientY+t.y}}function K(e){return{"v-dropdown-container":!0,"v-dropdown-no-border":!e.border}}const I=j({name:"VDropdown",props:{align:{type:String,default:"left"},border:{type:Boolean,default:!0},toggle:{type:Boolean,default:!0},manual:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},animated:{type:[String,Boolean],default:!0},width:{type:Number,default:void 0},fullWidth:{type:Boolean,default:!1},trigger:{type:String,default:O}},emits:["visible-change"],setup(e,{slots:t,emit:p,expose:d}){const n=b(!1),o=Y({top:"",left:"",width:""}),u=Y({x:null,y:null}),c=b(!1),i=b(null),l=b(null),a=b(null),{isTriggerByClick:h,isTriggerByHover:y,isTriggerByContextmenu:x}=T(e);L(n,r=>p("visible-change",r));function v(){e.disabled||("trigger"in t&&E(),y?(window.clearTimeout(i.value),i.value=window.setTimeout(()=>{n.value=!0},D)):n.value=!0)}function w(r=!1){e.disabled||!e.toggle&&!r||(y?(window.clearTimeout(i.value),i.value=window.setTimeout(()=>{n.value=!1},D)):n.value=!1)}function C(){n.value?w():v()}function E(){const r=z(l.value),s=z(a.value),m=A(e,u.y,r,s),g=G(e,u.x,r,s);c.value=m.dropUp,o.top=`${m.top}px`,o.left=`${g}px`}function M(r){if(!n.value)return;const s=r.composedPath().some(m=>m===l.value);s&&!e.toggle&&!x||(!s||s&&x)&&w(!0)}return X(()=>{typeof e.width<"u"&&(o.width=e.width+"px"),document.body.append(a.value),document.body.addEventListener("mousedown",M)}),H(()=>{document.body.removeEventListener("mousedown",M),a.value&&a.value.remove()}),P(()=>{l.value&&l.value.remove()}),d({display:v,close:w,toggleVisible:C,adjust:E,container:a,visible:n}),()=>{const r=[];"trigger"in t&&r.push(t.trigger({visible:n,disabled:e.disabled}));const s={class:K(e),style:o,ref:a,onMousedown:f=>f.stopPropagation()};y&&(s.onMouseenter=v,s.onMouseleave=w);const m=U(k("div",s,t.default&&t.default()),[[W,n.value]]);r.push(k($,{name:q(e,c)},()=>[m]));const g={class:{"v-dropdown-trigger":!0,"v-dropdown-trigger--full-width":e.fullWidth},ref:l};return y?(g.onMouseenter=v,g.onMouseleave=w):h?g.onClick=f=>{e.manual||(f.stopPropagation(),C())}:x&&(g.onContextmenu=f=>{if(e.manual)return;f.stopPropagation(),f.preventDefault();const S=J(f);u.x=S.x,u.y=S.y,v()}),k("div",g,r)}}});export{I as J};
